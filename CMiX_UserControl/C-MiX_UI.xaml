<UserControl
            x:Class="CMiX.CMiX_UI"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
            xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
            xmlns:CMiX="clr-namespace:CMiX"
            x:Name="cmix" 
    Loaded="cmix_Loaded"
            mc:Ignorable="d" d:DesignWidth="1584.666" d:DesignHeight="972" FontSize="11" FontFamily="Roboto Medium"
            >
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/CMiX_UserControl;component/RessourceDictionnaries/Brushes/GenericBrushes.xaml"/>
                <ResourceDictionary Source="/CMiX_UserControl;component/RessourceDictionnaries/Styles/BaseFocusVisual.xaml"/>
                <ResourceDictionary Source="/CMiX_UserControl;component/RessourceDictionnaries/Styles/BaseTreeViewStyle.xaml"/>
                <ResourceDictionary Source="/CMiX_UserControl;component/RessourceDictionnaries/Styles/BaseRadioButtonStyle.xaml"/>
                <ResourceDictionary Source="/CMiX_UserControl;component/RessourceDictionnaries/Styles/LayerRadioButtonStyle.xaml"/>
                <ResourceDictionary Source="/CMiX_UserControl;component/RessourceDictionnaries/Styles/BaseButtonStyle.xaml"/>
                <ResourceDictionary Source="/CMiX_UserControl;component/RessourceDictionnaries/Styles/BaseComboBoxStyle.xaml"/>
                <ResourceDictionary Source="/CMiX_UserControl;component/RessourceDictionnaries/Styles/BaseComboBoxItemStyle.xaml"/>
                <ResourceDictionary Source="/CMiX_UserControl;component/RessourceDictionnaries/Styles/BaseComboBoxItemPanelStyle.xaml"/>
                <ResourceDictionary Source="/CMiX_UserControl;component/RessourceDictionnaries/Styles/BaseToggleButtonStyle.xaml"/>
                <ResourceDictionary Source="/CMiX_UserControl;component/RessourceDictionnaries/Styles/BaseTextBoxStyle.xaml"/>
                <ResourceDictionary Source="/CMiX_UserControl;component/RessourceDictionnaries/Styles/BaseTabControlStyle.xaml"/>
                <ResourceDictionary Source="/CMiX_UserControl;component/RessourceDictionnaries/Styles/BaseTabItemStyle.xaml"/>
                <ResourceDictionary Source="/CMiX_UserControl;component/RessourceDictionnaries/Styles/BaseLabelStyle.xaml"/>
                <ResourceDictionary Source="/CMiX_UserControl;component/RessourceDictionnaries/Styles/BaseSliderStyle.xaml"/>
                <ResourceDictionary Source="/CMiX_UserControl;component/RessourceDictionnaries/Styles/BaseGroupBoxStyle.xaml"/>
                <ResourceDictionary Source="/CMiX_UserControl;component/RessourceDictionnaries/Styles/BaseListBoxControlStyle.xaml"/>
                <ResourceDictionary Source="/CMiX_UserControl;component/RessourceDictionnaries/Styles/BaseListBoxItemStyle.xaml"/>
                <ResourceDictionary Source="/CMiX_UserControl;component/RessourceDictionnaries/Styles/BaseMenuStyle.xaml"/>
                <ResourceDictionary Source="/CMiX_UserControl;component/RessourceDictionnaries/Styles/BaseMenuItemStyle.xaml"/>
                <ResourceDictionary Source="/CMiX_UserControl;component/RessourceDictionnaries/Styles/BaseContextMenuStyle.xaml"/>
                <ResourceDictionary Source="/CMiX_UserControl;component/RessourceDictionnaries/Styles/BaseScrollViewerStyle.xaml"/>
                <ResourceDictionary Source="/CMiX_UserControl;component/RessourceDictionnaries/Styles/BaseRangeSlider.xaml"/>

                <ResourceDictionary Source="/CMiX_UserControl;component/RessourceDictionnaries/LayerControlTemplate.xaml"/>
                <ResourceDictionary Source="/CMiX_UserControl;component/RessourceDictionnaries/ContentControlTemplate.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <CMiX:PeriodToBPMConverter x:Key="PeriodToBPM"/>
            <CMiX:ColorToStringConverter x:Key="ColorToString"/>
            <BooleanToVisibilityConverter x:Key="BooleanToVisibility"/>
        </ResourceDictionary>
    </UserControl.Resources>
    
    <DockPanel x:Name="CMiX_UserControl"  Background="#FF141414" LastChildFill="True" KeyDown="LayerButton_KeyDown">
        <Grid Margin="0, 0, 0, 2" DockPanel.Dock="Top">
            <Label x:Name="ProjectName" Foreground="{DynamicResource BaseText}" Background="{DynamicResource BaseColor}" HorizontalContentAlignment="Right" Content="{Binding DataContext.CompoName[0], ElementName=cmix, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
            <Menu x:Name="MainMenu" Focusable="False" Grid.Row="0" VerticalContentAlignment="Center" HorizontalAlignment="Left" Style="{DynamicResource BaseMenuStyle}" Height="25">
                <MenuItem x:Name="FileMenu" Focusable="False" VerticalContentAlignment="center" Padding="20, 0, 20, 0" Style="{DynamicResource BaseMenuItemStyle}" Header="File" HorizontalContentAlignment="Stretch" Height="{Binding ActualHeight, ElementName=MainMenu, Mode=OneWay}" >
                    <MenuItem Header="New" Click="New_Click" Template="{DynamicResource BaseSubMenuItem}" />
                    <MenuItem Header="Open" Click="Open_Click" Template="{DynamicResource BaseSubMenuItem}"/>
                    <MenuItem Header="Save" Click="Save_Click" Template="{DynamicResource BaseSubMenuItem}"/>
                    <MenuItem Header="Save As" Click="SaveAs_Click" Template="{DynamicResource BaseSubMenuItem}"/>
                    <MenuItem Header="Quit" Click="Quit_Click" Template="{DynamicResource BaseSubMenuItem}"/>
                </MenuItem>
            </Menu>
        </Grid>
        <Border Grid.Row="2" DockPanel.Dock="Bottom" Height="25" Margin="0, 2, 0, 0" Background="{StaticResource BaseDarkerColor}"/>
        <Grid Grid.Row="1" KeyboardNavigation.TabNavigation="Cycle">
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Border Grid.Column="0" Margin="4" Focusable="True" Background="{StaticResource BaseHighDarkerColor}" FocusVisualStyle="{DynamicResource FocusVisualStyle}">
                <DockPanel LastChildFill="False" KeyboardNavigation.TabNavigation="None">
                    
                    <CMiX:MasterBeatControl x:Name="MasterBeatControl" Focusable="True" FocusVisualStyle="{StaticResource FocusVisualStyle}" DockPanel.Dock="Bottom" MasterPeriod="{Binding DataContext.MasterPeriod[0], ElementName=cmix, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                    <Label Margin="0, 4, 0, 4" Height="20" FontSize="10" HorizontalContentAlignment="Center" Content="Beat" DockPanel.Dock="Bottom" Background="{StaticResource BaseDarkColor}" Foreground="{StaticResource BaseText}"/>
                
                    <DockPanel x:Name="CameraControl" DockPanel.Dock="Bottom" Focusable="True" FocusVisualStyle="{StaticResource FocusVisualStyle}" Margin="0, 4, 0, 4">
                        <Label Margin="0, 0, 0, 4" DockPanel.Dock="Top" Foreground="{StaticResource BaseText}" Background="{StaticResource BaseDarkColor}" Height="20" FontSize="10" Content="Camera" HorizontalContentAlignment="Center"/>
                        <DockPanel LastChildFill="True" DockPanel.Dock="Top">
                            <CMiX:BeatControls x:Name="BeatControlsCam" DockPanel.Dock="Right"  Margin="1" Height="25" BeatControlChanged="BeatControlsCam_BeatControlChanged"
                                               MasterPeriod="{Binding DataContext.MasterPeriod[0], ElementName=cmix, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                Multiplier="{Binding DataContext.CamBeatMultiplier[0], ElementName=cmix, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                           />
                            <CMiX:CustomSlider x:Name="CamChanceToHit" Height="25" Tag="CamChanceToHit" SliderValueChanged="SliderValueChanged" Value="{Binding DataContext.CamChanceToHit[0], ElementName=cmix, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        </DockPanel>
                        <Grid DockPanel.Dock="Top">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <CMiX:CMiXComboBox x:Name="CameraRotation" FocusVisualStyle="{DynamicResource FocusVisualStyle}" Margin="1" Grid.Column="0" Height="25" Tag="CamRotation" SelectionChanged="ComboBoxSelectionChanged" Template="{DynamicResource BaseComboBoxStyle}" ItemContainerStyle="{DynamicResource BaseListBoxItemStyle}" 
                                ItemsSource="{Binding CamRotation, ElementName=cmix, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                SelectedItem="{Binding DataContext.CamRotation[0], ElementName=cmix, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                />
                            <CMiX:CMiXComboBox x:Name="CameraLookAt" FocusVisualStyle="{DynamicResource FocusVisualStyle}" Margin="1" Grid.Column="1" Height="25" Tag="CamLookAt" SelectionChanged="ComboBoxSelectionChanged" Template="{DynamicResource BaseComboBoxStyle}" ItemContainerStyle="{DynamicResource BaseListBoxItemStyle}" 
                                ItemsSource="{Binding CamLookAt, ElementName=cmix, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                SelectedItem="{Binding DataContext.CamLookAt[0], ElementName=cmix, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                />
                            <CMiX:CMiXComboBox x:Name="CameraView" FocusVisualStyle="{DynamicResource FocusVisualStyle}" Margin="1" Grid.Column="2" Height="25" Tag="CamView" SelectionChanged="ComboBoxSelectionChanged" Template="{DynamicResource BaseComboBoxStyle}" ItemContainerStyle="{DynamicResource BaseListBoxItemStyle}" 
                                ItemsSource="{Binding CamView, ElementName=cmix, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                SelectedItem="{Binding DataContext.CamView[0], ElementName=cmix, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                />

                        </Grid>
                        <CMiX:CMiXRangeSlider x:Name="CameraFOV" Margin="1" DockPanel.Dock="Top" Height="25" Tag="CamFOV" RangeSliderValueChanged="RangeSliderValueChanged"/>
                        <CMiX:CMiXRangeSlider x:Name="CameraZoom" Margin="1" DockPanel.Dock="Top" Height="25" Tag="CamZoom" RangeSliderValueChanged="RangeSliderValueChanged"/>
                    </DockPanel>
                </DockPanel>
            </Border>
            
            <Grid x:Name="ContentControl" KeyboardNavigation.TabNavigation="None" FocusVisualStyle="{DynamicResource FocusVisualStyle}" Focusable="True" Margin="0, 4, 0, 4" Grid.Column="1" Grid.ColumnSpan="3">
                <!--<CMiX:ChannelControls x:Name="Layer0" Tag="0" 
                                        DataContext="{Binding DataContext.ChData[0], Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ElementName=cmix}"
                                        MasterPeriod="{Binding ControlPeriod, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, ElementName=BeatControlsChannel0}"/>-->

            </Grid>

            <Border Grid.Column="4" Margin="4" Focusable="True" FocusVisualStyle="{DynamicResource FocusVisualStyle}" Background="{StaticResource BaseDarkerColor}">
                <DockPanel>
                    <StackPanel DockPanel.Dock="Bottom" Orientation="Horizontal">
                        <Button x:Name="AddLayer" Height="25" Width="25" Content="+" Click="AddLayer_Click" DockPanel.Dock="left" Style="{StaticResource BaseButtonStyle}"/>
                        <Button x:Name="RemoveLayer" Height="25" Width="25" Content="-" Click="RemoveLayer_Click" DockPanel.Dock="left" Style="{StaticResource BaseButtonStyle}"/>
                    </StackPanel>


                    <ScrollViewer VerticalScrollBarVisibility="Auto" DockPanel.Dock="Bottom"  Margin="2">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="0.2*"/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0" x:Name="LayerEnableStack"
                                       PreviewMouseLeftButtonDown ="sp_PreviewMouseLeftButtonDown"
                                       PreviewMouseLeftButtonUp="sp_PreviewMouseLeftButtonUp"
                                        PreviewMouseMove="sp_PreviewMouseMove"
                                        DragEnter="sp_DragEnter"
                                        Drop="sp_Drop"
                                        >
                                <!--<CMiX:ChannelEnable x:Name="LayerEnable0" Tag="0" DataContext="{Binding DataContext.ChData[0], Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ElementName=cmix}"/>-->
                            </StackPanel>
                            <StackPanel x:Name="LayerControlStack" AllowDrop="True" Grid.Column="1">
                                <CMiX:ChannelLayer x:Name="LayerControl0" DataContext="{Binding DataContext.ChData[0], Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ElementName=cmix}"/>
                        </StackPanel>
                        </Grid>
                    </ScrollViewer>
                </DockPanel>
            </Border>
        </Grid>
    </DockPanel>
</UserControl>
